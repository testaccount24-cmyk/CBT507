//TPLCRPHO  PROC  LISTING='*',  SYSOUT SPECIFICATION FOR ALL LISTINGS
//     CRTCORE=500K,  REGION ACTUALLY USED FOR PROGRAM OF CREATE STEP
//     CRTMAX=2000K,  MAXIMUM REGION USED DURING CREATE STEP
//     CORE=500K,     REGION ACTUALLY USED FOR PROGRAMS OF TPL STEP
//     TPLMAX=2000K,  MAXIMUM REGION USED DURING TPL STEP
//     PSRCORE=500K,  REGION SIZE FOR PCLSORT STEP
//     LAYCORE=500K,  REGION ACTUALLY USED FOR PROGRAM OF LAYOUT STEP
//     LAYMAX=2000K,  MAXIMUM REGION USED DURING LAYOUT STEP
//     CSRCORE=500K,  REGION SIZE FOR CALLSORT STEP
//     WKUN=WORK,    DEVICE TYPE FOR SORT WORKFILES
//     WKSP=1600,     NO. OF BLKS FOR SORT WORKFILES
//     COORSP=1000,   NO. OF BLKS FOR COORDINATES WORKFILE
//     CONSP=400,     NO. OF BLKS FOR TABLE CONSTRUCTIONS WORKFILE
//     CONIN=80,      SECONDARY ALLOCATION SIZE FOR TABLE CONSTRUC.
//     SPC1SP=200,    INITIAL NO. OF BLKS FOR TABLE SPECS WORKFILE
//     SPC2SP=200,    NO. OF BLKS FOR PCL'S NEW TBSPECS WORKFILE
//     CL3UN=WORK,   DEVICE TYPE FOR "TBCELLS" WORKFILE
//     CL3SP=4000,    NO OF BLKS FOR "TBCELLS" WORKFILE
//     TSLDSN='SYS2.TPL.V6.TYPE.STYLES', NAME OF TYPE STYLE LIBRARY<<
//     STYLE=NOPH,    NAME OF DEFAULT TYPE STYLE                     <<
//     PHOTDSN='&&PHOTOUT', DSNAME OF PHOTO WORKFILE
//     PHOTUNT=WORK, UNIT TYPE FOR PHOTO WORKFILE
//     PHOTTYP=NEW,   PHOTO WORKFILE STATUS
//     PHOTDEL=DELETE, PHOTO WORKFILE FINAL DISPOSITION
//     PHSPACE=480,   NO. OF BLOCKS FOR PHOTO WORKFILE
//     PHINCR=200,    SECONDARY ALLOC BLOCKS FOR PHOTO WORKFILE
//     PHOTLAB='SL',  PHOTO WORKFILE LABEL TYPE
//     PHOTSEQ=1,     PHOTO WORKFILE SEQUENCE
//     CALPRE='SYS2.TPL.V6',  & INITIALS PREFIX FOR CALL FILE        <<
//     CALNAME=,      NAME OF CALL FILE
//     CALTYPE=NEW,   STATUS OF CALL FILE DATA SET
//     CALDISP=CATLG, TO PERMIT CATALOGING OF CALL FILE
//     CALMOD=OLD,    TO PERMIT MOD OF CALL FILE DATA SET
//     CALSP=640,     INITIAL SPACE IN BLOCKS FOR CALL FILE
//     CALIN=160,     SECONDARY SPACE FOR CALL FILE
//     CALUNIT=TSOWRK, NIT TYPE FOR CALL FILE                        <<
//     CALSEQ=1,      DATASET SEQUENCE # FOR CALL FILE IF ON TAPE
//     CALLAB=SL,     LABEL TYPE FOR CALL FILE IF ON TAPE
//*    EXPRET='RETPD', CHOICE: 'EXPDT' OR 'RETPD' IF TAPE CALL FILE  <<
//*    RETPD=10,     # OF DAYS TO RETAIN CALL FILE IF ON TAPE       <<
//     CLWKUN=TSOWRK, UNIT TYPE FOR PHOTO OUTPUT WORK FILE
//     REQSP=40,      INITIAL NUMBER OF BLOCKS FOR GENERATED TPL
//     REQIN=20,      SECONDARY NUMBER OF BLOCKS FOR GENERATED TPL
//     REQUNIT=TSOWRK, NIT FOR GENERATED TPL (DEFAULT: TEMP DISK)
//     CHGSP=40,      INITIAL NUMBER OF BLOCKS FOR GENERATED PCL
//     CHGIN=40,      SECONDARY NUMBER OF BLOCKS FOR GENERATED PCL
//     CHGUNIT=WORK, UNIT FOR GENERATED PCL (DEFAULT: TEMP DISK)
//     DICNAME='BLS.HYPHEN.DICT',  NAME OF DICTIONARY
//     DICPRE='SYS2.TPL.V6', PREFIX FOR DICTIONARY DSNAME            <<
//     PRODSN='SYS2.TPL.V6.DEFAULT.PROFILE', DSNAME OF PROFILE       <<
//     CBKBLK=2976,CBVER=6,
//     CBN='TPL.CREATE.TABLE',CBPREFX='SYS2',
//     CALBLK=1300,CALLREC=130,CALRECF=FB,
//     CL3RECF=FB,CL3LREC=32,
//     COBLK=2976,COLRECL=24,CORECFM=FB,
//     CONBLK=3059,CONLREC=133,CONRECF=FB,
//     CONTROL=IEFBR14,CONMAX=100K,
//     CRTFREE=100,CRTOPT=,
//     CTLDSN='SYS2.TPL.V6.OBJLIB(CTLOBJ)',
//     CVTDSN='SYS2.TPL.V6.OBJLIB(CVTOBJ)',
//     FREE=100,
//     GENBLK=12960,GENLREC=80,GENRECF=FB,
//     LAYDSN='SYS2.TPL.V6.OBJLIB(LAYOBJ)',
//     LAYOPT=,
//     MONITOR=TPLMONTR,
//     MONLIB='SYS2.TPL.V6.LOADLIB',
//     PCLDSN='SYS2.TPL.V6.OBJLIB(PCLOBJ)',
//     PHBLK=2560,PHLRECL=256,PHRECFM=FB,
//     QUOT=,      *'''',
//     SORTPGM=SORT,                                                 <<
//     TPLBLK=2976,
//     TPLOPT=,
//     TRNDSN='SYS2.TPL.V6.OBJLIB(TRNOBJ)'
//*********************************************************************
//*                                                                   *
//*     T P L C R P H O - - A PROCEDURE TO CREATE TABLES CONTAINING   *
//*          USER-SPECIFIED CELL VALUES AND LABELS, AND THEN PRODUCE  *
//*          A CALL FILE FOR PHOTOCOMPOSING THE TABLES.               *
//*                                                                   *
//*     THE FOLLOWING PARAMETERS ARE NECESSARY:                       *
//*          CALPRE - THE ACCOUNT NUMBER & INITIALS UNDER WHICH THE  *
//*                    CALL FILE IS STORED.                           *
//*          CALL    - THE NAME USED TO IDENTIFY THE CALL FILE.       *
//*                                                                   *
//*                                                                   *
//*     THE CREATE TABLE STATEMENTS COMPRISING THE REQUEST MUST BE    *
//*           PLACED AFTER A "//CREATE.TABLES" DD CARD.               *
//*                                                                   *
//*     ANY PCL STATEMENTS MODIFYING THE REQUEST, IF PRESENT, MUST    *
//*          BE PLACED AFTER A "//TPL.CHANGES" DD CARD, WHICH MUST    *
//*          APPEAR AFTER THE CREATE TABLE STATEMENTS.                *
//*                                                                   *
//*     THIS PROCEDURE EXECUTES VERSION 6 OF THE TPL SYSTEM.          *
//*                                                                   *
//*     IN CASE OF PROBLEMS, CONTACT THE TPL SYSTEM TEAM.             *
//*            TELEPHONE:  357-5999                                   *
//*                                          LAST UPDATED ON 08/21/84 *
//*********************************************************************
//*
//*
//SYSCNTRL  EXEC  PGM=&CONTROL,REGION=&CONMAX
//* *****     ALLOCATE WORKING DATASETS                         *******
//TPLSPEC  DD  DSN=&&TPLSPEC,UNIT=WORK,DISP=(NEW,PASS),
//  SPACE=(&TPLBLK,(&SPC1SP))
//COORD  DD  DSN=&&COORD,UNIT=WORK,DISP=(NEW,PASS),
//  DCB=(RECFM=&CORECFM,LRECL=&COLRECL,BLKSIZE=&COBLK),
//  SPACE=(&TPLBLK,(&COORSP))
//CELLS  DD  DSN=&&TBCELLS,UNIT=&CL3UN,DISP=(NEW,PASS),
//  DCB=(RECFM=&CL3RECF,LRECL=&CL3LREC,BLKSIZE=&TPLBLK),
//  SPACE=(&TPLBLK,(&CL3SP))
//COORD2  DD  DSN=*.COORD,VOL=REF=*.COORD,DISP=(SHR,PASS)
//CONSTR  DD  DSN=&&CONSTR,UNIT=WORK,DISP=(NEW,PASS),
//  DCB=(RECFM=&CONRECF,LRECL=&CONLREC,BLKSIZE=&CONBLK),
//  SPACE=(&CONBLK,(&CONSP,&CONIN))
//TBSPECS  DD  DSN=&&TBSPECS,UNIT=WORK,DISP=(NEW,PASS),
//  SPACE=(&TPLBLK,(&SPC2SP))
//SORTWK01  DD  DSN=&&WORK1,DISP=(NEW,PASS),
//  UNIT=&WKUN,SPACE=(&TPLBLK,(&WKSP),,CONTIG)
//SORTWK02  DD  DSN=&&WORK2,DISP=(NEW,PASS),
//  UNIT=&WKUN,SPACE=(&TPLBLK,(&WKSP),,CONTIG)
//SORTWK03  DD  DSN=&&WORK3,DISP=(NEW,PASS),
//  UNIT=&WKUN,SPACE=(&TPLBLK,(&WKSP),,CONTIG)
//SORTWK04  DD  DSN=&&WORK4,DISP=(NEW,PASS),
//  UNIT=&WKUN,SPACE=(&TPLBLK,(&WKSP),,CONTIG)
//SORTWK05  DD  DSN=&&WORK5,DISP=(NEW,PASS),
//  UNIT=&WKUN,SPACE=(&TPLBLK,(&WKSP),,CONTIG)
//SORTWK06  DD  DSN=&&WORK6,DISP=(NEW,PASS),
//  UNIT=&WKUN,SPACE=(&TPLBLK,(&WKSP),,CONTIG)
//PHOTOUT  DD  DSN=&PHOTDSN,DISP=(&PHOTTYP,PASS,&PHOTDEL),
//  UNIT=TSOWRK,
//  DCB=(RECFM=&PHRECFM,LRECL=&PHLRECL,BLKSIZE=&PHBLK),
//  LABEL=(&PHOTSEQ,&PHOTLAB),SPACE=(&PHBLK,(&PHSPACE,&PHINCR))
//CALLWRK  DD  DSN=&&CALLWRK,UNIT=&CLWKUN,DISP=(NEW,PASS,DELETE),
//  DCB=(RECFM=&CALRECF,LRECL=&CALLREC,BLKSIZE=&CALBLK),
//  SPACE=(&CALBLK,(&CALSP,&CALIN))
//CALLFILE  DD  DSN=&QUOT.&CALPRE..PCL.VIDEO.CALL.&CALNAME.&QUOT,
//  UNIT=&CALUNIT,
//  DISP=(&CALTYPE,&CALDISP,KEEP),LABEL=(&CALSEQ,&CALLAB),
//  DCB=(RECFM=&CALRECF,LRECL=&CALLREC,BLKSIZE=&CALBLK),
//  SPACE=(&CALBLK,(&CALSP,&CALIN),RLSE)
//REQUEST  DD  DSN=&&REQUEST,DISP=(NEW,PASS),
//  DCB=(RECFM=&GENRECF,LRECL=&GENLREC,BLKSIZE=&GENBLK),
//  SPACE=(&GENBLK,(&REQSP,&REQIN)),UNIT=&REQUNIT
//CHANGES  DD  DSN=&&CHANGES,DISP=(NEW,PASS),
//  DCB=(RECFM=&GENRECF,LRECL=&GENLREC,BLKSIZE=&GENBLK),
//  SPACE=(&GENBLK,(&CHGSP,&CHGIN)),UNIT=&CHGUNIT
//*
//*
//CREATE  EXEC  PGM=&MONITOR,REGION=&CRTMAX,
//  PARM='FILE=&TPLBLK,FREE=&CRTFREE,MAX=&CRTCORE,&CRTOPT',
//  COND=(0,LT,SYSCNTRL)
//* *****     THE CREATE TABLE PHASE                            *******
//STEPLIB  DD  DSN=&MONLIB,DISP=(SHR,PASS)
//PROGRAM  DD  DSN=&CTLDSN,DISP=SHR
//SYSPRINT  DD  SYSOUT=&LISTING
//SYSPUNCH  DD  DSN=&&REQUEST,DISP=(OLD,PASS),
//  SPACE=(&GENBLK,(&REQSP,&REQIN),RLSE)
//OUTPUT3  DD  DSN=&&CHANGES,DISP=(OLD,PASS),
//  SPACE=(&GENBLK,(&CHGSP,&CHGIN),RLSE)
//FILE6  DD  DSN=&&TBCELLS,DISP=(OLD,PASS),
//  SPACE=(&TPLBLK,(&CL3SP),RLSE),
//  DCB=(RECFM=&CL3RECF,LRECL=&CL3LREC,BLKSIZE=&TPLBLK)
//SYSIN  DD  DUMMY
//INPUT3  DD  DDNAME=TABLES
//TABLES  DD  DUMMY
//INPUT7  DD  DUMMY
//*
//*
//TPL  EXEC  PGM=&MONITOR,REGION=&TPLMAX,
//  PARM='FILE=&TPLBLK,FILE2=&CBKBLK,FREE=&FREE,MAX=&CORE,&TPLOPT',
//  COND=((0,LT,SYSCNTRL),(0,LT,CREATE))
//* *****     THE TPL TRANSLATION PHASE, FOLLOWED BY THE PCL    *******
//* *****     TRANSLATION PHASE.                                *******
//STEPLIB  DD  DSN=&MONLIB,DISP=(SHR,PASS)
//PROGRAM  DD  DSN=&TRNDSN,DISP=SHR
//  DD  DSN=&PCLDSN,DISP=SHR
//SYSPRINT  DD  SYSOUT=&LISTING
//SYSPUNCH  DD  DSN=&&PCLSORT,UNIT=WORK,SPACE=(TRK,(1,1),RLSE),
//  DCB=(RECFM=FB,LRECL=80,BLKSIZE=400),DISP=(NEW,PASS)
//OUTPUT3  DD  DSN=&&CONSTR,DISP=(OLD,PASS),
//  DCB=(RECFM=&CONRECF,LRECL=&CONLREC,BLKSIZE=&CONBLK),
//  SPACE=(&CONBLK,(&CONSP,&CONIN),RLSE)
//OUTPUT7  DD  SYSOUT=&LISTING,DCB=(RECFM=FA,LRECL=133,BLKSIZE=133)
//FILE1  DD  DSN=&&TPLSPEC,DISP=(OLD,DELETE,KEEP),
//  SPACE=(&TPLBLK,(&SPC1SP),RLSE)
//FILE2  DD  DSN=&CBPREFX..CB.V&CBVER..&CBN,DISP=SHR
//FILE3  DD  DSN=&&COORD,DISP=(OLD,PASS,DELETE),
//  SPACE=(&TPLBLK,(&COORSP),RLSE)
//FILE4  DD  DSN=&&TBSPECS,DISP=(OLD,PASS),
//  SPACE=(&TPLBLK,(&SPC2SP),RLSE)
//FILE8  DD  DSN=&DICPRE..&DICNAME..DICOBJ,DISP=SHR
//SYSIN  DD  DSN=&&REQUEST,DISP=(OLD,DELETE)
//INPUT3  DD  DSN=&&CHANGES,DISP=(OLD,DELETE)
//  DD  DSN=&PRODSN,DISP=SHR
//  DD  DDNAME=CHANGES
//CHANGES  DD  DUMMY
//INPUT4  DD  DUMMY
//INPUT7  DD  DUMMY
//*
//*
//PCLSORT  EXEC  PGM=&SORTPGM,REGION=&PSRCORE,
//  COND=((0,LT,SYSCNTRL),(0,LT,CREATE),(16,LE,TPL))
//* *****     THE PCL COORDINATE RECORD SORT STEP               *******
//SORTLIB  DD  DSN=SYS1.SORTLIB,DISP=SHR                             <<
//SYSIN  DD  DSN=&&PCLSORT,DISP=(OLD,DELETE,DELETE)
//SYSOUT  DD  SYSOUT=&LISTING
//SORTMSGS  DD  SYSOUT=&LISTING
//SORTIN  DD  DSN=&&COORD,DISP=(OLD,PASS),
//  DCB=(RECFM=&CORECFM,LRECL=&COLRECL,BLKSIZE=&COBLK)
//SORTOUT  DD  DSN=&&COORD,DISP=(OLD,PASS),
//  DCB=(RECFM=&CORECFM,LRECL=&COLRECL,BLKSIZE=&COBLK)
//SORTWK01  DD  DSN=&&WORK1,DISP=(OLD,PASS)
//SORTWK02  DD  DSN=&&WORK2,DISP=(OLD,PASS)
//SORTWK03  DD  DSN=&&WORK3,DISP=(OLD,PASS)
//SORTWK04  DD  DSN=&&WORK4,DISP=(OLD,PASS)
//SORTWK05  DD  DSN=&&WORK5,DISP=(OLD,PASS)
//SORTWK06  DD  DSN=&&WORK6,DISP=(OLD,PASS)
//*
//*
//LAYOUT  EXEC  PGM=&MONITOR,REGION=&LAYMAX,
//  PARM='FILE=&TPLBLK,FREE=&FREE,MAX=&LAYCORE,&LAYOPT',
//  COND=((0,LT,SYSCNTRL),(0,LT,CREATE),(4,LE,TPL),(0,LT,PCLSORT))
//* *****     THE TABLE LAYOUT AND PRINTING STEP, AND THEN      *******
//* *****     THE PHOTOCOMPOSITION CONVERSION STEP.             *******
//STEPLIB  DD  DSN=&MONLIB,DISP=(SHR,KEEP)
//PROGRAM  DD  DSN=&LAYDSN,DISP=SHR
//  DD  DSN=&CVTDSN,DISP=SHR
//SYSPRINT  DD  SYSOUT=&LISTING,DCB=BLKSIZE=133
//SYSPUNCH  DD  SYSOUT=&LISTING,DCB=(RECFM=FA,LRECL=133,BLKSIZE=133)
//OUTPUT4  DD  DSN=&PHOTDSN,DISP=(OLD,&PHOTDEL,&PHOTDEL),
//  LABEL=(&PHOTSEQ,&PHOTLAB),SPACE=(&PHBLK,(&PHSPACE,&PHINCR),RLSE),
//  DCB=(RECFM=&PHRECFM,LRECL=&PHLRECL,BLKSIZE=&PHBLK)
//INPUT3  DD  DUMMY
//FILE3  DD  DSN=&&COORD,DISP=(OLD,DELETE,DELETE)
//FILE4  DD  DSN=&&TBSPECS,DISP=(OLD,DELETE,DELETE)
//FILE6  DD  DSN=&&TBCELLS,UNIT=&CL3UN,DISP=(OLD,DELETE,KEEP)
//INPUT5  DD  DSN=&TSLDSN(&STYLE.CON),DISP=(SHR,KEEP),
//  DD  DSN=&TSLDSN(&STYLE.TYPE),DISP=(SHR,KEEP),
//INPUT4  DD  DSN=*.OUTPUT4,DISP=(OLD,&PHOTDEL,&PHOTDEL),
//  LABEL=(&PHOTSEQ,&PHOTLAB),
//  VOL=REF=*.OUTPUT4
//OUTPUT3  DD  SYSOUT=&LISTING,DCB=(RECFM=FA,LRECL=133,BLKSIZE=133)
//OUTPUT5  DD  DSN=&&CALLWRK,DISP=(OLD,PASS,DELETE),
//  SPACE=(&CALBLK,(&CALSP,&CALIN),RLSE),
//  DCB=(RECFM=&CALRECF,LRECL=&CALLREC,BLKSIZE=&CALBLK)
//INPUT2  DD  DDNAME=LIMIT
//LIMIT  DD  DUMMY
//INPUT7  DD  DUMMY
//OUTPUT6  DD  DSN=&&CALLSRT,UNIT=WORK,DISP=(NEW,PASS,DELETE),
//  SPACE=(TRK,(1,1)),DCB=(RECFM=FB,LRECL=80,BLKSIZE=400)
//OUTPUT7  DD  SYSOUT=&LISTING,DCB=(RECFM=FA,LRECL=133,BLKSIZE=133)
//SYSIN  DD  DUMMY
//COORD  DD  DSN=&&COORD,DISP=(OLD,DELETE,DELETE)
//*
//*
//CALLSORT  EXEC  PGM=&SORTPGM,REGION=&CSRCORE,
//  COND=((0,LT,SYSCNTRL),(0,LT,CREATE),(4,LE,TPL),(0,LT,PCLSORT),
//        (0,LT,LAYOUT))
//* *****     SORT THE CALLFILE USED BY THE TPLCRTP PROCEDURE   *******
//SORTLIB  DD  DSN=SYS1.SORTLIB,DISP=SHR                             <<
//SYSIN  DD  DSN=&&CALLSRT,DISP=(OLD,DELETE,DELETE)
//SYSOUT  DD  SYSOUT=&LISTING
//SORTMSGS  DD  SYSOUT=&LISTING
//SORTIN  DD  DSN=&&CALLWRK,
//  DCB=(RECFM=&CALRECF,LRECL=&CALLREC,BLKSIZE=&CALBLK),
//  DISP=(OLD,DELETE,DELETE)
//SORTOUT  DD  DSN=&QUOT.&CALPRE..PCL.VIDEO.CALL.&CALNAME.&QUOT,
//  DISP=(&CALMOD,KEEP,KEEP),
//* LABEL=(&CALSEQ,&CALLAB,&EXPRET=&RETPD),                          <<
//  SPACE=(&CALBLK,(&CALSP,&CALIN),RLSE),
//  DCB=(RECFM=&CALRECF,LRECL=&CALLREC,BLKSIZE=&CALBLK)
//SORTWK01  DD  DSN=&&WORK1,DISP=(OLD,DELETE,DELETE)
//SORTWK02  DD  DSN=&&WORK2,DISP=(OLD,DELETE,DELETE)
//SORTWK03  DD  DSN=&&WORK3,DISP=(OLD,DELETE,DELETE)
//SORTWK04  DD  DSN=&&WORK4,DISP=(OLD,DELETE,DELETE)
//SORTWK05  DD  DSN=&&WORK5,DISP=(OLD,DELETE,DELETE)
//SORTWK06  DD  DSN=&&WORK6,DISP=(OLD,DELETE,DELETE)
//*     END OF PROCEDURE TO CREATE TABLES AND PRODUCE
//*          A CALL FILE FOR PHOTOCOMPOSING THE TABLES.
//*  PEND
